!function(e,t,o){"function"==typeof define&&define.amd?define(e,function(){return o(window,document)}):"object"==typeof module&&module.exports?module.exports=o(window,document):t[e]=o(window,document)}("ping",this,function(f,s){var h="online",m="offline";return function(){if(arguments.length<1)throw new TypeError("too few arguments");var o="",c=6e4,u="favicon.ico";if("string"==typeof arguments[0])o=arguments[0];else{var e=arguments[0];o=e.host||o,c=e.timeout||c,u=e.favicon||u}return new Promise(function(n,e){var t=s.createElement("a");if(t.href=o,t.pathname="",t.search="",t.hash="","https:"===f.location.protocol&&"http:"===t.protocol)return e(new Error("insecure request"));var r=0,a=!1,i=f.setTimeout(function(){a=!0,e(new Error("timeout occured"))},c);!function(e){if("function"!=typeof f.fetch)return function(t){r=Date.now();var e=s.createElement("a");e.href=t,e.search="?_="+Date.now();var o=document.createElement("script");o.type="application/javascript",o.src=e.href,o.onload=o.onerror=function(e){s.head.removeChild(e.target),a||(f.clearTimeout(this.__timer),"load"===e.type?n({host:t,status:h,time:Date.now()-r}):function(t){r=Date.now();var e=s.createElement("a");e.href=t,e.pathname=u,e.search="?_="+Date.now();var o=new Image;o.src=e.href,o.onload=o.onerror=function(e){a||(f.clearTimeout(i),n("load"===e.type?{host:t,status:h,time:Date.now()-r}:{host:t,status:m,time:Date.now()-r}))}}(t))},s.head.appendChild(o)}(e);r=Date.now(),f.fetch(e,{method:"HEAD",mode:"no-cors",cache:"no-cache"}).then(function(){a||(f.clearTimeout(i),n({host:e,status:h,time:Date.now()-r}))}).catch(function(){a||(f.clearTimeout(i),n({host:e,status:m,time:Date.now()-r}))})}(t.href)})}});