"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e,o){"function"==typeof define&&define.amd?define(t,function(){return o(document)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=o(document):e[t]=o(document)}("ping",void 0,function(s){return function(i){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(e,o){var c=s.createElement("a");if(c.href=i,c.pathname="",c.search="",c.hash="","https:"===location.protocol&&"http:"===c.protocol)return o(new Error("insecure request"));var n,r,t=f.timeout||6e4,u=f.favicon||"favicon.ico",a=setTimeout(function(){return e({host:i,status:"timeout",time:t})},t);(n=c,r=Date.now(),new Promise(function(t,e){if("function"!=typeof fetch)return e(new Error("no such method"));fetch(n.href,{method:"HEAD",cache:"no-cache",mode:"no-cors"}).then(function(){t({host:n.host,status:"online",time:Date.now()-r})},function(){t({host:n.host,status:"offline",time:Date.now()-r})})})).then(function(t){clearTimeout(a),e(t)},function(t){var n,r;(n=c,r=Date.now(),new Promise(function(e,o){n.search="_="+r;var t=s.createElement("script");t.onerror=function(t){s.head.removeChild(t.target),o(new Error("cannot check status"))},t.onload=function(t){s.head.removeChild(t.target),e({host:n.host,status:"online",time:Date.now()-r})},t.type="application/javascript",t.src=n.href,s.head.appendChild(t)})).then(function(t){clearTimeout(a),e(t)},function(t){var n,r,i;(n=c,r=u,i=Date.now(),new Promise(function(t,e){n.pathname=r,n.search="_="+i;var o=new Image;o.onerror=function(){return t({host:n.host,status:"offline",time:Date.now()-i})},o.onload=function(){return t({host:n.host,status:"online",time:Date.now()-i})},o.src=n.href})).then(function(t){clearTimeout(a),e(t)},function(t){clearTimeout(a),o(t)})})})})}});