!function(t,e,n){"function"==typeof define&&define.amd?define(t,n(window,document)):"object"==typeof module&&module.exports?module.exports=n(window,document):e[t]=n(window,document)}("ringo",this,function(c,a){var o=function(){var i="online",r="offline";function t(t,e,n){if(!t||"string"!=typeof t)throw new TypeError('argument "host" must be a string');if(!e||"function"!=typeof e)throw new TypeError('argument "callback" must be a function');if(n&&"number"!=typeof n)throw new TypeError('argument "timeout" must be a number');var o=a.createElement("a");if(o.href=t,o.pathname="",o.search="",o.hash="","https:"===c.location.protocol&&"http:"===o.protocol)return e(new Error("insecure request"),null);this.__timeout=!1,this.__timer=c.setTimeout(function(){this.__timeout=!0,e(new Error("timeout occured"),null)}.bind(this),n||6e4),this.__tryPingByFetch(o.href,e)}return t.prototype.__tryPingByFetch=function(t,e){if(!c.fetch)return this.__tryPingByScript(t,e);c.fetch(t,{method:"HEAD",mode:"no-cors",cache:"no-cache"}).then(function(){this.__timeout||(c.clearTimeout(this.__timer),e(null,i))}.bind(this)).catch(function(){this.__timeout||(c.clearTimeout(this.__timer),e(null,r))}.bind(this))},t.prototype.__tryPingByScript=function(e,n){var t=a.createElement("a");t.href=e,t.search="?_="+Date.now();var o=document.createElement("script");o.type="application/javascript",o.src=t.href,o.onload=o.onerror=function(t){a.head.removeChild(t.target),this.__timeout||(c.clearTimeout(this.__timer),"load"===t.type?n(null,i):this.__tryPingByFavicon(e,n))}.bind(this),a.head.appendChild(o)},t.prototype.__tryPingByFavicon=function(t,e){var n=a.createElement("a");n.href=t,n.pathname="favicon.ico",n.search="?_="+Date.now();var o=new Image;o.src=n.href,o.onload=o.onerror=function(t){this.__timeout||(c.clearTimeout(this.__timer),e(null,"load"===t.type?i:r))}.bind(this)},t}();return function(t,e,n){new o(t,e,n)}});